# prolog
Playground for all things Prolog-related. I am especially interested in trying to use it for structural engineering. 

## HTML Generation

See `htmlgen.pl`. First we declare the `go` predicate. This is called by the Makefile using the command `swipl -s htmlgen.pl -g go -t halt`. The command imports `htmlgen.pl` as a script, calls the `go` predicate to initialize, and then finally calls `halt` which shuts down the interpreter.

```prolog
go :- current_output(S), html(S).
```

It uses the `current_output/1` predicate to tell Prolog to print to the command line. Then it uses `html/1` to write the html code to the stream, `S`. The stream `S` is assigned to the `current_output` stream--a built-in predicate in SWI Prolog.

The `html/1` predicate has the job of writing the overall document. Everything is here. There is the `DOCTYPE` tag, the open and closing `html` tags and the two sections of any HTML file: the HEAD and BODY. These are the next predicates to make.

```prolog
html(S) :-
    write(S, '<!DOCTYPE html>\n'),
    write(S, '<html>\n'),
    head(S),
    body(S),
    write(S, '</html>\n').

```

Now that we have our `html/1` predicate, we need to generate the head and then the body. We will look at these one at a time starting with `head/1`. 

```prolog
head(S) :-
    write(S, '<head>\n'),
    title(S),
    style(S),
    write(S, '</head>\n').
```

The predicate takes a stream and writes the open and closing `head` tags. Between these it writes the title and a style block. Overall it is a primitive HTML document. The program is for learning purposes only. It is not intended to be used for production anytime soon.

You get the idea. Here are the rest of them en masse.

```prolog
title(S) :-
    write(S, '<title>My Manual HTML Page</title>\n').

style(S) :-
    write(S, '<style>\n'),
    write(S, '  body { font-family: sans-serif; }\n'),
    write(S, '</style>\n').

body(S) :-
    write(S, '<body>\n'),
    write(S, '<h1>Hello from Prolog!</h1>\n'),
    write(S, '<p>This page was generated by hand-written Prolog code.</p>\n'),
    write(S, '</body>\n').
```

How could this be used?

This paradigm could be used to generate any number of different documents using their structure only.

- [GraphViz](https://graphviz.org/) – A powerful open-source tool for visualizing structured data as diagrams.
- [HTML](https://developer.mozilla.org/en-US/docs/Web/HTML) – The standard markup language for creating web pages and web applications.
- [LaTeX](https://www.latex-project.org/) – A high-quality typesetting system, often used for technical and scientific documentation.
- [Markdown](https://daringfireball.net/projects/markdown/) – A lightweight markup language with plain text formatting syntax, designed to be easy to write and read.
- [Mermaid](https://mermaid-js.github.io/) – A JavaScript-based diagramming and charting tool that uses a simple markdown-like script language.
- [Plain text](https://en.wikipedia.org/wiki/Plain_text) – Text that contains no formatting other than spaces and line breaks.
- [PlantUML](https://plantuml.com/) – A tool to create UML diagrams from a plain text language.

_How could it be used for structural engineering?_

It could generate a design report with detailed calculations and code checking confirmations. 

_What would be next steps to move forward?_

We need to define the structure. Here are some tentative thoughts on the matter.

_How could it be used for software development?_

It could be used to generate an entire software package. Think of something like this:

```prolog
program :- compile, source_code.
source_code :- main_module, concrete_module.
main_module :- main_source_file, main_source_code.
concrete_module :- concrete_source_file, concrete_source_code.
main_source_code :- main_file, main_imports, main_function.
concrete_source_code :- concrete_file, concrete_imports, concrete_functions.
...
```

This may be the most exciting thing related to Prolog I have stumbled upon. 

# Chord Finding

ChatGPT wrote this program at my request. 

```bash
% make chords
swipl -s chords.pl
Enter chord name (e.g., C, Dm, G7, Fmaj7, Ddim, D+): Dm
Notes in D minor: [D,F,A]
```

# Testing

See `world.pl` for example of testing. It looks like this:

```prolog
% Facts
married(joe, julie).

% Predicate that handles symmetry
are_married(X, Y) :-
    married(X, Y), !; % note the cut operator `!`
    married(Y, X).

% BEGIN TESTS ================================================
:- begin_tests(marriage).

test('Joe is married to Julie') :-
    are_married(joe, julie).

test('Julie is married to Joe') :-
    are_married(julie, joe).

:- end_tests(marriage).
% END TESTS ================================================
```

To run the tests, you need to do the following:

1. Start SWI-Prolog.
2. Consult the file `world.pl`.
3. Use `run_tests.` predicate.

At the command line:

```bash
% swipl -s world.pl
Welcome to SWI-Prolog (threaded, 64 bits, version 9.2.9)
SWI-Prolog comes with ABSOLUTELY NO WARRANTY. This is free software.
Please run ?- license. for legal details.

For online help and background, visit https://www.swi-prolog.org
For built-in help, use ?- help(Topic). or ?- apropos(Word).
```

This starts a Prolog session with the `world.pl` clauses loaded. Now we can start the tests using `run_tests/0` predicate.

```prolog
?- run_tests.
[2/2] marriage:Julie is married to Joe ................. passed (0.000 sec)
% All 2 tests passed in 0.016 seconds (0.012 cpu)
true.
```
