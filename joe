#!/usr/bin/env swipl
% joe.pl
% joe command line program reimplemented in Swift.
:- initialization(main, main).

main([]) :-
    help.

main([Cmd]) :- 
    command(Cmd),
    call(Cmd). 


write_subcommands :-
    writeln("Available subcommands:"),
    forall(
        (
            command(Cmd),
            description(Cmd, Desc)
        ),
        (
            format("    ~w: ~w~n", [Cmd, Desc])
        )
    ).

% Command declarations
command(help).
command(prolog).

% Command descriptions
description(help, "List sub commands").
description(prolog, "Open prolog repository in VS Code.").

% Command implementations

help :- 
    writeln("\nUsage: joe <subcommand>\n"),
    write_subcommands,
    nl.

prolog :-
    writeln("Opening prolog repository"),
    shell('code /Users/joelegner/Desktop/iCloud\\ Desktop/Programming/prolog/').