#!/usr/bin/env swipl
% joe.pl
% joe command line program reimplemented in Swift.
:- initialization(main, main).

% 1. Main program

main([]) :-
    help.

main([Cmd]) :- 
    command(Cmd),
    call(Cmd). 

/*
TO ADD A NEW COMMAND:
Declare the command.
Describe the command.
Implement the command.

See examples for help and prolog commands below
*/

% 2. Command declarations
command(help).
command(prolog).

% 3. Command descriptions
description(help, "List sub commands").
description(prolog, "Open prolog repository in VS Code.").

% 4. Command implementations
help :- 
    writeln("\nUsage: joe <subcommand>\n"),
    write_subcommands,
    nl.

prolog :-
    writeln("Opening prolog repository"),
    shell('code /Users/joelegner/Desktop/iCloud\\ Desktop/Programming/prolog/').

% 5. Helpers
write_subcommands :-
    writeln("Available subcommands:"),
    forall(
        (
            command(Cmd),
            description(Cmd, Desc)
        ),
        (
            format("    ~w: ~w~n", [Cmd, Desc])
        )
    ).
